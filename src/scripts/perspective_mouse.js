$.fn.extend({perpectiveMouse:function(){function init(){lastMousePos={x:$container.width()/2,y:$container.height()/2},$elements=getEles(),$elements&&($container.on("mousemove",function(e){movingProceed(e)}),$container.on("mouseenter",function(){}),$container.on("mouseleave",function(){}),$elements.on("move",function(){elmMove.call(this)}))}function elmMove(){var $e=$(this),elmDetail=[$e,$e.data("posLeft"),$e.data("posTop")];movingQueue.push(elmDetail),movingQueue.length>1||movingStep()}function movingStep(){if(movingQueue.length){var elmDetail=movingQueue.shift();elmDetail[0].css({left:elmDetail[1],top:elmDetail[2]}),arguments.callee()}}function getEles(){for(var $elms,selectors=set.selectors,s="";selectors.length;){s=selectors.pop();var $e=$container.find(s);$e&&($elms=$elms?$elms.add($e):$e)}return $elms.each(function(){var $e=$(this);$e.data("maxRange",Number($e.data("perpective-mouse"))*set.maxRange),$e.data("posLeft",parseFloat($e.css("left"))),$e.data("posTop",parseFloat($e.css("top")))}),$elms}function movingProceed(e){var targetPos={x:e.offsetX||e.pageX-$container.offset().left,y:e.offsetY||e.pageY-$container.offset().top},diffPer={perX:(targetPos.x-lastMousePos.x)/containerWidth,perY:(targetPos.y-lastMousePos.y)/containerHeight};$elements.each(function(){var $e=$(this),l=$e.data("posLeft"),t=$e.data("posTop"),maxRange=$e.data("maxRange"),moveX=diffPer.perX*maxRange,moveY=diffPer.perY*maxRange;$e.data("posTop",t+moveY),$e.data("posLeft",l+moveX)}),$elements.trigger("move",diffPer),lastMousePos=targetPos}var $elements,set="object"==typeof arguments[0]?arguments[0]:{},defaultSet={selectors:[],maxRange:500,timeStep:25},$container=this,containerWidth=this.width(),containerHeight=this.height(),lastMousePos={x:0,y:0},movingQueue=[];set=$.extend(defaultSet,set);set.timeStep;init()}});